version: "3.0"
services:
  # ui:
  #   build: ./uml_designer/ui
  #   image: ui
  #   container_name: ui
  #   ports:
  #     - "8080:80"

  # node:
  #   container_name: nodeserver
  #   build: ./uml_designer/server
  #   ports:
  #     - "3000:3000"
  #   hostname: nodeapp
  #   environment:
  #     - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka:8761/eureka/
  #   image: nodeapp
  #   command: npm start
  #   depends_on:
  #     - eureka

  gateway:
    container_name: apigateway
    build: ./apigateway
    ports:
      - "8054:8054"
    hostname: apigateway
    environment:
      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka:8761/eureka/
    depends_on:
      - eureka

  eureka:
    container_name: eurekaserver
    build: ./eurekaserver
    ports:
      - "8761:8761"
    environment:
      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka:8761/eureka/

  auth:
    container_name: authenticationapp
    build: ./authenticationapp
    ports:
      - "8081:8081"
    hostname: authenticationapp
    environment:
      - EUREKA_CLIENT_SERVICEURL_DEFAULTZONE=http://eureka:8761/eureka/
      - EUREKA_HOST=eureka
      - MYSQL_HOST=mysql
    image: authenticationapp
    depends_on:
      - eureka

  mysql:
    image: mysql
    environment:
      - MYSQL_ROOT_PASSWORD=0000
      - MYSQL_DATABASE=userdb
    ports:
      - "3306:3306"
